# Vercel Postgres データベース接続手順

Vercelでデータベースを作成し、プロジェクトに接続する詳細な手順です。

## 手順 1: Storageタブを開く

1. [Vercelのダッシュボード](https://vercel.com/dashboard)にログインします。
2. 今回作成したプロジェクト（`business-habit-tracker`）をクリックして開きます。
3. 画面上部のメニューバーにある **"Storage"** というタブをクリックします。
   （もし "Storage" が見当たらない場合は、画面幅を広げるか、"Settings" の隣などを探してください）

## 手順 2: データベースの作成

1. Storage画面にある **"Connect Store"**（または "Create Database"）という白いボタンをクリックします。
2. 選択肢の中から **"Postgres"**（Serverless SQL）を選択します。
3. **"Continue"** をクリックします。
4. 以下の設定を入力します（通常はそのままでOKです）：
   - **Store Name**: `habit-tracker-db` など、好きな名前
   - **Region**: `Tokyo (hnd1)` を推奨（日本からのアクセスが速いため）
   - **Auth**: **OFF（無効）** にしてください（このアプリは独自の認証システムを使用するため不要です）
5. **"Create"** をクリックします。

## 手順 3: プロジェクトへの接続

1. データベースが作成されると、自動的にプロジェクトに接続されます。
2. 接続が成功すると、環境変数（`POSTGRES_URL` など）が自動的に設定されます。
3. 左側のメニューの **".env.local"** タブなどをクリックして、`POSTGRES_URL` が表示されていれば接続成功です。

## 手順 4: 再デプロイ（重要！）

データベースを接続しただけでは、現在動いているアプリには反映されません。**再デプロイ**が必要です。

1. 画面上部の **"Deployments"** タブをクリックします。
2. 一番上にある最新のデプロイの右端にある **3つの点（...）** をクリックします。
3. メニューから **"Redeploy"** を選択します。
4. 確認画面が出るので、もう一度 **"Redeploy"** ボタンを押します。
5. デプロイが完了するまで待ちます（1〜2分）。

## 手順 5: データベースの初期化

1. デプロイが完了したら、アプリのURLを開きます。
2. URLの末尾に `/api/seed` をつけてアクセスします。
   例: `https://business-habit-tracker-xxxx.vercel.app/api/seed`
3. 画面に `{"success":true, ...}` と表示されれば準備完了です！
